# Internal Caddy for AccrediVault behind host Caddy.
# Host Caddy terminates TLS and forwards traffic to this service on 127.0.0.1:8016.

:80 {
  # API routes
  handle /api/* {
    reverse_proxy backend:8000
  }

  # Django admin
  handle /admin/* {
    reverse_proxy backend:8000
  }

  # Static files from Django (if needed)
  handle /static/* {
    reverse_proxy backend:8000
  }

  # Media files from Django (if needed)
  handle /media/* {
    reverse_proxy backend:8000
  }

  # Frontend (React app)
  handle {
    reverse_proxy frontend:5173
  }

  # Health check
  handle /health {
    respond "ok" 200
  }
}
